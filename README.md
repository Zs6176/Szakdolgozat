# PMSensor Project Configuration

## Android App – `PMSensor/app/src/main/res/values/secrets.xml`

```xml
<resources>
    <string name="supabase_url">https://YOUR_PROJECT.supabase.co</string>
    <string name="supabase_key">ANON_PUBLIC_KEY</string>
</resources>
```

---

## ESP32 – `ESP32_Code_PMSensor_Supabase_using/secrets.h`

```cpp
#define WIFI_SSID "YOUR_WIFI"
#define WIFI_PASSWORD "YOUR_PASSWORD"

const char* supabase_base_url = "https://YOUR_PROJECT.supabase.co";
const char* supabase_auth_url = "https://YOUR_PROJECT.supabase.co/auth/v1/token?grant_type=password";
const char* supabase_rest_url = "https://YOUR_PROJECT.supabase.co/rest/v1/PMSensor";
const char* supabase_key = "ANON_PUBLIC_KEY";

const char* user_email = "YOUR_EMAIL";
const char* user_password = "YOUR_PASSWORD";
```

---

## Database – SQL Table

```sql
create table public."PMSensor" (
  "Atmospheric_pressure" real null,
  "Humidity" real null,
  "Humidity_raw" real null,
  "Light_quantity" real null,
  "PM25" real null,
  "Temperature" real null,
  "Temperature_raw" real null,
  "UV" smallint null,
  "PM10" real null,
  "Measure_time" timestamp with time zone null default date_trunc('second'::text, (now() AT TIME ZONE 'CEST'::text)),
  "ID" bigint generated by default as identity not null,
  constraint PMSensor_pkey primary key ("ID"),
  constraint humidity_range check (
    (
      ("Humidity" >= (0)::double precision)
      and ("Humidity" <= (100)::double precision)
    )
  ),
  constraint humidity_raw_range check (
    (
      ("Humidity_raw" >= (0)::double precision)
      and ("Humidity_raw" <= (100)::double precision)
    )
  ),
  constraint light_range check (
    (
      ("Light_quantity" >= (0)::double precision)
      and ("Light_quantity" <= (100000)::double precision)
    )
  ),
  constraint pm10_range check (
    (
      ("PM10" >= (0)::double precision)
      and ("PM10" <= (1000)::double precision)
    )
  ),
  constraint pm25_range check (
    (
      ("PM25" >= (0)::double precision)
      and ("PM25" <= (1000)::double precision)
    )
  ),
  constraint pressure_range check (
    (
      ("Atmospheric_pressure" >= (0)::double precision)
      and (
        "Atmospheric_pressure" <= (5000)::double precision
      )
    )
  ),
  constraint temp_range check (
    (
      (
        "Temperature" >= ('-100'::integer)::double precision
      )
      and ("Temperature" <= (100)::double precision)
    )
  ),
  constraint temp_raw_range check (
    (
      (
        "Temperature_raw" >= ('-100'::integer)::double precision
      )
      and ("Temperature_raw" <= (100)::double precision)
    )
  )
) TABLESPACE pg_default;
```

---

## Policies

### Enable insert for authenticated users only
```sql
alter policy "Enable insert for authenticated users only"
on "public"."PMSensor"
to authenticated
with check (
  true
);
```

### Enable read access for all users
```sql
alter policy "Enable read access for all users"
on "public"."PMSensor"
to public
using (
  true
);
```
